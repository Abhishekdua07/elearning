

{% extends 'base.html' %}
{% load static %}

{% block content %}
  <link href="{% static 'css/sidebar_webinar.css' %}" rel="stylesheet"/>
  {% include 'breadcrumb.html' %}
  {% include 'announcement.html'%}
  <div class="container student-course">
    <div class="row">
      <div class="col-md-2">
        {% if session_list %}

          <ul class="sidebar-nav">
            <li>
              {% for instance in session_list %}
                <a class="a-target" href="{% url 'student_webinar' webinar_name instance.slug %}">
                  {{ instance.session_name }}
                </a>
              {% endfor %}
            </li>
          </ul>

        {% endif %}
      </div>

      <div class="col-md-10">
        {% if result_list %}
          {% for item in result_list %}
            {% if item.link %}
              {% if 'youtube.com' in item.link %}
                <div class="course-inner-content video">
                  <iframe width="640" height="360" src="{{ item.link }}" frameborder="0" allowfullscreen></iframe>
                </div>
              {% else %}
                <div class="course-inner-content">
                {{ item.link|safe }}
                </div>
                {% endif %}
            {% elif item.gdlink %}
              <div class="course-ineer-content video">
                 <iframe src="{{ item.gdlink }}" ></iframe>
              </div>
            {% elif item.lesson %}
              <div class="course-inner-content">
                {{ item.lesson|safe }}
              </div>
            {% else %}
              <div class="course-inner-content">
                <a href='{{ item.file.url }}'>{{ item.file }}</a>
              </div>
            {% endif %}
          {% endfor %}
        {% endif %}
      </div>
    </div>
  </div>

  <script>
    $(document).ready(function () {
      /* Make left-border same height as parent */
      var rightColumn = $(".col-md-10");
      var parentHeight = rightColumn.parent().height();
      rightColumn.css("height", parentHeight);

      /* Add active class on chapter change */
      var pathname = window.location.pathname;
      pathname = pathname.substring(0, pathname.length - 1);
      $('.sidebar-nav > li a[href="' + pathname + '"]').addClass('active-sidebar');
    });
  </script>

  <div class="main-comment-section">
    <div class="container-fluid mt-2">
      <div class="form-group row">
        <form method="post" class="comment-form" action=".">
          {% csrf_token %}
          {{ comment_form.as_p }}
          <input type="submit" value="Submit" class="btn btn-outline-success">
        </form>
      </div>
    </div>
    {{ comments.count }} Comment{{ comments|pluralize }}
    {% for comment in comments %}
      <blockquote class="blockquote">
        <p class="mb-0"><small>{{ comment.content }}</small></p>
        <footer class="blockquote-footer"><small>by <cite title="Source Title">{{ comment.user|capfirst }}</cite></small>
          <button type="button" name="button" class="reply-btn btn btn-outline-dark btn-sm ml-2">Reply</button>
        </footer>
      </blockquote>

      <div class="replied-comments container mt-2" style="display:none;">
        {% for reply in comment.replies.all %}
        <blockquote class="blockquote">
          <p class="mb-0"><small>{{ reply.content }}</small></p>
          <footer class="blockquote-footer"><small>by <cite title="Source Title">{{ reply.user|capfirst }}</cite></small>
        </footer>
        </blockquote>
        {% endfor %}
        <div class="form-group row">
          <form method="post" class="reply-form" action=".">
            {% csrf_token %}
            <input type="hidden" name="comment_id" value="{{ comment.id }}">
            {{ comment_form.as_p }}
            {% if request.user.is_authenticated %}
              <input type="submit" value="Submit" class="btn btn-outline-success">
            {% else %}
              <input type="submit" value="Submit" class="btn btn-outline-success" disabled>
            {% endif %}
          </form>
        </div>
      </div>
    {% endfor %}
  </div>
{% endblock %}
